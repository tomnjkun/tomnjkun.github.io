{"ast":null,"code":"'use strict';\n\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { NativeNfcManager, callNative } from \"./NativeNfcManager\";\nimport { NfcTech, NfcManagerBase, DEFAULT_REGISTER_TAG_EVENT_OPTIONS } from \"./NfcManager\";\nimport { Nfc15693RequestFlagIOS, Nfc15693ResponseFlagIOS, Iso15693HandlerIOS } from \"./NfcTech/Iso15693HandlerIOS\";\nimport { handleNativeException } from \"./NfcError\";\nvar NfcManagerIOS = function (_NfcManagerBase) {\n  _inherits(NfcManagerIOS, _NfcManagerBase);\n  var _super = _createSuper(NfcManagerIOS);\n  function NfcManagerIOS() {\n    var _this;\n    _classCallCheck(this, NfcManagerIOS);\n    _this = _super.call(this);\n    _this.isEnabled = _asyncToGenerator(function* () {\n      return true;\n    });\n    _this.requestTechnology = function () {\n      var _ref2 = _asyncToGenerator(function* (tech) {\n        var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        if (typeof tech === 'string') {\n          tech = [tech];\n        }\n        var techList = [];\n        for (var t of tech) {\n          if (t === NfcTech.NfcA) {\n            techList.push(NfcTech.MifareIOS);\n          } else if (t === NfcTech.NfcV) {\n            techList.push(NfcTech.Iso15693IOS);\n          } else {\n            techList.push(t);\n          }\n        }\n        return handleNativeException(callNative('requestTechnology', [techList, _objectSpread(_objectSpread({}, DEFAULT_REGISTER_TAG_EVENT_OPTIONS), options)]));\n      });\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    _this.cancelTechnologyRequest = _asyncToGenerator(function* () {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var _options$throwOnError = options.throwOnError,\n        throwOnError = _options$throwOnError === void 0 ? false : _options$throwOnError;\n      return handleNativeException(callNative('cancelTechnologyRequest'), !throwOnError);\n    });\n    _this.getBackgroundTag = _asyncToGenerator(function* () {\n      var ndefMessage = yield handleNativeException(callNative('getBackgroundNdef'));\n      return ndefMessage ? {\n        ndefMessage: ndefMessage\n      } : null;\n    });\n    _this.clearBackgroundTag = _asyncToGenerator(function* () {\n      return callNative('clearBackgroundNdef');\n    });\n    _this.getBackgroundNdef = function () {\n      return handleNativeException(callNative('getBackgroundNdef'));\n    };\n    _this.setAlertMessage = function (alertMessage) {\n      return handleNativeException(callNative('setAlertMessage', [alertMessage]));\n    };\n    _this.setAlertMessageIOS = function (alertMessage) {\n      return handleNativeException(callNative('setAlertMessage', [alertMessage]));\n    };\n    _this.invalidateSessionIOS = function () {\n      return handleNativeException(callNative('invalidateSession'));\n    };\n    _this.invalidateSessionWithErrorIOS = function () {\n      var errorMessage = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'Error';\n      return handleNativeException(callNative('invalidateSessionWithError', [errorMessage]));\n    };\n    _this.sendMifareCommandIOS = function (bytes) {\n      return handleNativeException(callNative('sendMifareCommand', [bytes]));\n    };\n    _this.sendFelicaCommandIOS = function (bytes) {\n      return handleNativeException(callNative('sendFelicaCommand', [bytes]));\n    };\n    _this.sendCommandAPDUIOS = function (bytesOrApdu) {\n      if (Platform.OS !== 'ios') {\n        return Promise.reject('not implemented');\n      }\n      if (Array.isArray(bytesOrApdu)) {\n        var bytes = bytesOrApdu;\n        return handleNativeException(new Promise(function (resolve, reject) {\n          NativeNfcManager.sendCommandAPDUBytes(bytes, function (err, response, sw1, sw2) {\n            if (err) {\n              reject(err);\n            } else {\n              resolve({\n                response: response,\n                sw1: sw1,\n                sw2: sw2\n              });\n            }\n          });\n        }));\n      } else {\n        var apdu = bytesOrApdu;\n        return handleNativeException(new Promise(function (resolve, reject) {\n          NativeNfcManager.sendCommandAPDU(apdu, function (err, response, sw1, sw2) {\n            if (err) {\n              reject(err);\n            } else {\n              resolve({\n                response: response,\n                sw1: sw1,\n                sw2: sw2\n              });\n            }\n          });\n        }));\n      }\n    };\n    return _this;\n  }\n  _createClass(NfcManagerIOS, [{\n    key: \"iso15693HandlerIOS\",\n    get:\n    function get() {\n      if (!this._iso15693HandlerIOS) {\n        this._iso15693HandlerIOS = new Iso15693HandlerIOS();\n      }\n      return this._iso15693HandlerIOS;\n    }\n  }]);\n  return NfcManagerIOS;\n}(NfcManagerBase);\nexport { NfcManagerIOS, Nfc15693RequestFlagIOS, Nfc15693ResponseFlagIOS };","map":{"version":3,"names":["NativeNfcManager","callNative","NfcTech","NfcManagerBase","DEFAULT_REGISTER_TAG_EVENT_OPTIONS","Nfc15693RequestFlagIOS","Nfc15693ResponseFlagIOS","Iso15693HandlerIOS","handleNativeException","NfcManagerIOS","isEnabled","requestTechnology","tech","options","techList","t","NfcA","push","MifareIOS","NfcV","Iso15693IOS","cancelTechnologyRequest","throwOnError","getBackgroundTag","ndefMessage","clearBackgroundTag","getBackgroundNdef","setAlertMessage","alertMessage","setAlertMessageIOS","invalidateSessionIOS","invalidateSessionWithErrorIOS","errorMessage","sendMifareCommandIOS","bytes","sendFelicaCommandIOS","sendCommandAPDUIOS","bytesOrApdu","Platform","OS","Promise","reject","Array","isArray","resolve","sendCommandAPDUBytes","err","response","sw1","sw2","apdu","sendCommandAPDU","_iso15693HandlerIOS"],"sources":["/Users/dp-tonmai/Documents/my-solito-app/node_modules/react-native-nfc-manager/src/NfcManagerIOS.js"],"sourcesContent":["'use strict';\nimport {Platform} from 'react-native';\nimport {NativeNfcManager, callNative} from './NativeNfcManager';\nimport {\n  NfcTech,\n  NfcManagerBase,\n  DEFAULT_REGISTER_TAG_EVENT_OPTIONS,\n} from './NfcManager';\nimport {\n  Nfc15693RequestFlagIOS,\n  Nfc15693ResponseFlagIOS,\n  Iso15693HandlerIOS,\n} from './NfcTech/Iso15693HandlerIOS';\nimport {handleNativeException} from './NfcError';\n\nclass NfcManagerIOS extends NfcManagerBase {\n  constructor() {\n    super();\n  }\n\n  isEnabled = async () => {\n    return true;\n  };\n\n  requestTechnology = async (tech, options = {}) => {\n    if (typeof tech === 'string') {\n      tech = [tech];\n    }\n\n    const techList = [];\n    for (const t of tech) {\n      if (t === NfcTech.NfcA) {\n        techList.push(NfcTech.MifareIOS);\n      } else if (t === NfcTech.NfcV) {\n        techList.push(NfcTech.Iso15693IOS);\n      } else {\n        techList.push(t);\n      }\n    }\n\n    return handleNativeException(\n      callNative('requestTechnology', [\n        techList,\n        {\n          ...DEFAULT_REGISTER_TAG_EVENT_OPTIONS,\n          ...options,\n        },\n      ]),\n    );\n  };\n\n  cancelTechnologyRequest = async (options = {}) => {\n    const {throwOnError = false} = options;\n    return handleNativeException(\n      callNative('cancelTechnologyRequest'),\n      !throwOnError,\n    );\n  };\n\n  getBackgroundTag = async () => {\n    // iOS doesn't report the full tag, only the ndefMessage part\n    const ndefMessage = await handleNativeException(callNative('getBackgroundNdef'));\n    return ndefMessage ? { ndefMessage } : null;\n  };\n\n  clearBackgroundTag = async () => callNative('clearBackgroundNdef');\n\n  // -------------------------------------\n  // public only for iOS\n  // -------------------------------------\n  getBackgroundNdef = () =>\n    handleNativeException(callNative('getBackgroundNdef'));\n\n  setAlertMessage = (alertMessage) =>\n    handleNativeException(callNative('setAlertMessage', [alertMessage]));\n\n  setAlertMessageIOS = (alertMessage) =>\n    handleNativeException(callNative('setAlertMessage', [alertMessage]));\n\n  invalidateSessionIOS = () =>\n    handleNativeException(callNative('invalidateSession'));\n\n  invalidateSessionWithErrorIOS = (errorMessage = 'Error') =>\n    handleNativeException(\n      callNative('invalidateSessionWithError', [errorMessage]),\n    );\n\n  // -------------------------------------\n  // (iOS) NfcTech.MifareIOS API\n  // -------------------------------------\n  sendMifareCommandIOS = (bytes) =>\n    handleNativeException(callNative('sendMifareCommand', [bytes]));\n\n  // -------------------------------------\n  // (iOS) NfcTech.FelicaIOS API\n  // -------------------------------------\n  sendFelicaCommandIOS = (bytes) =>\n    handleNativeException(callNative('sendFelicaCommand', [bytes]));\n\n  // -------------------------------------\n  // (iOS) NfcTech.IsoDep API\n  // -------------------------------------\n  sendCommandAPDUIOS = (bytesOrApdu) => {\n    if (Platform.OS !== 'ios') {\n      return Promise.reject('not implemented');\n    }\n\n    if (Array.isArray(bytesOrApdu)) {\n      const bytes = bytesOrApdu;\n      return handleNativeException(\n        new Promise((resolve, reject) => {\n          NativeNfcManager.sendCommandAPDUBytes(\n            bytes,\n            (err, response, sw1, sw2) => {\n              if (err) {\n                reject(err);\n              } else {\n                resolve({response, sw1, sw2});\n              }\n            },\n          );\n        }),\n      );\n    } else {\n      const apdu = bytesOrApdu;\n      return handleNativeException(\n        new Promise((resolve, reject) => {\n          NativeNfcManager.sendCommandAPDU(apdu, (err, response, sw1, sw2) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve({response, sw1, sw2});\n            }\n          });\n        }),\n      );\n    }\n  };\n\n  // -------------------------------------\n  // (iOS) NfcTech.Iso15693IOS API\n  // -------------------------------------\n  get iso15693HandlerIOS() {\n    if (!this._iso15693HandlerIOS) {\n      this._iso15693HandlerIOS = new Iso15693HandlerIOS();\n    }\n    return this._iso15693HandlerIOS;\n  }\n}\n\nexport {NfcManagerIOS, Nfc15693RequestFlagIOS, Nfc15693ResponseFlagIOS};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}