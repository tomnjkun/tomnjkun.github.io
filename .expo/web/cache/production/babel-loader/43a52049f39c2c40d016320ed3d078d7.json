{"ast":null,"code":"import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import{callNative}from\"./NativeNfcManager\";import{NfcManagerBase}from\"./NfcManager\";import{MifareClassicHandlerAndroid}from\"./NfcTech/MifareClassicHandlerAndroid\";import{MifareUltralightHandlerAndroid}from\"./NfcTech/MifareUltralightHandlerAndroid\";import{NdefFormatableHandlerAndroid}from\"./NfcTech/NdefFormatableHandlerAndroid\";import{handleNativeException,buildNfcExceptionAndroid}from\"./NfcError\";var NfcAdapter={FLAG_READER_NFC_A:0x1,FLAG_READER_NFC_B:0x2,FLAG_READER_NFC_F:0x4,FLAG_READER_NFC_V:0x8,FLAG_READER_NFC_BARCODE:0x10,FLAG_READER_SKIP_NDEF_CHECK:0x80,FLAG_READER_NO_PLATFORM_SOUNDS:0x100};var delay=function delay(ms){return new Promise(function(resolve){return setTimeout(resolve,ms);});};var NfcManagerAndroid=function(_NfcManagerBase){_inherits(NfcManagerAndroid,_NfcManagerBase);var _super=_createSuper(NfcManagerAndroid);function NfcManagerAndroid(){var _this;_classCallCheck(this,NfcManagerAndroid);_this=_super.call(this);_this.requestTechnology=function(){var _ref=_asyncToGenerator(function*(tech){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};try{if(typeof tech==='string'){tech=[tech];}var sessionAvailable=yield _this._hasTagEventRegistrationAndroid();if(!sessionAvailable){yield _this.registerTagEvent(options);_this.cleanUpTagRegistration=true;}return yield callNative('requestTechnology',[tech]);}catch(ex){throw buildNfcExceptionAndroid(ex);}});return function(_x){return _ref.apply(this,arguments);};}();_this.cancelTechnologyRequest=_asyncToGenerator(function*(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _options$throwOnError=options.throwOnError,throwOnError=_options$throwOnError===void 0?false:_options$throwOnError,_options$delayMsAndro=options.delayMsAndroid,delayMsAndroid=_options$delayMsAndro===void 0?1000:_options$delayMsAndro;try{yield callNative('cancelTechnologyRequest');if(_this.cleanUpTagRegistration){yield delay(delayMsAndroid);yield _this.unregisterTagEvent();_this.cleanUpTagRegistration=false;}}catch(ex){if(throwOnError){throw buildNfcExceptionAndroid(ex);}}});_this.getBackgroundTag=function(){return handleNativeException(callNative('getBackgroundTag'));};_this.clearBackgroundTag=function(){return handleNativeException(callNative('clearBackgroundTag'));};_this.isEnabled=function(){return handleNativeException(callNative('isEnabled'));};_this.goToNfcSetting=function(){return handleNativeException(callNative('goToNfcSetting'));};_this.getLaunchTagEvent=function(){return handleNativeException(callNative('getLaunchTagEvent'));};_this.setNdefPushMessage=function(bytes){return handleNativeException(callNative('setNdefPushMessage',[bytes]));};_this.setTimeout=function(timeout){return handleNativeException(callNative('setTimeout',[timeout]));};_this.connect=function(techs){return handleNativeException(callNative('connect',[techs]));};_this.close=function(){return handleNativeException(callNative('close'));};_this.transceive=function(bytes){return handleNativeException(callNative('transceive',[bytes]));};_this.getMaxTransceiveLength=function(){return handleNativeException(callNative('getMaxTransceiveLength'));};_this._hasTagEventRegistrationAndroid=function(){return handleNativeException(callNative('hasTagEventRegistration'));};_this.cleanUpTagRegistration=false;return _this;}_createClass(NfcManagerAndroid,[{key:\"mifareClassicHandlerAndroid\",get:function get(){if(!this._mifareClassicHandlerAndroid){this._mifareClassicHandlerAndroid=new MifareClassicHandlerAndroid(this);}return this._mifareClassicHandlerAndroid;}},{key:\"mifareUltralightHandlerAndroid\",get:function get(){if(!this._mifareUltralightHandlerAndroid){this._mifareUltralightHandlerAndroid=new MifareUltralightHandlerAndroid(this);}return this._mifareUltralightHandlerAndroid;}},{key:\"ndefFormatableHandlerAndroid\",get:function get(){if(!this._ndefFormatableHandlerAndroid){this._ndefFormatableHandlerAndroid=new NdefFormatableHandlerAndroid(this);}return this._ndefFormatableHandlerAndroid;}}]);return NfcManagerAndroid;}(NfcManagerBase);export{NfcAdapter,NfcManagerAndroid};","map":{"version":3,"names":["callNative","NfcManagerBase","MifareClassicHandlerAndroid","MifareUltralightHandlerAndroid","NdefFormatableHandlerAndroid","handleNativeException","buildNfcExceptionAndroid","NfcAdapter","FLAG_READER_NFC_A","FLAG_READER_NFC_B","FLAG_READER_NFC_F","FLAG_READER_NFC_V","FLAG_READER_NFC_BARCODE","FLAG_READER_SKIP_NDEF_CHECK","FLAG_READER_NO_PLATFORM_SOUNDS","delay","ms","Promise","resolve","setTimeout","NfcManagerAndroid","requestTechnology","tech","options","sessionAvailable","_hasTagEventRegistrationAndroid","registerTagEvent","cleanUpTagRegistration","ex","cancelTechnologyRequest","throwOnError","delayMsAndroid","unregisterTagEvent","getBackgroundTag","clearBackgroundTag","isEnabled","goToNfcSetting","getLaunchTagEvent","setNdefPushMessage","bytes","timeout","connect","techs","close","transceive","getMaxTransceiveLength","_mifareClassicHandlerAndroid","_mifareUltralightHandlerAndroid","_ndefFormatableHandlerAndroid"],"sources":["/Users/dp-tonmai/Documents/GitHub/tomnjkun.github.io/node_modules/react-native-nfc-manager/src/NfcManagerAndroid.js"],"sourcesContent":["import {callNative} from './NativeNfcManager';\nimport {NfcManagerBase} from './NfcManager';\nimport {MifareClassicHandlerAndroid} from './NfcTech/MifareClassicHandlerAndroid';\nimport {MifareUltralightHandlerAndroid} from './NfcTech/MifareUltralightHandlerAndroid';\nimport {NdefFormatableHandlerAndroid} from './NfcTech/NdefFormatableHandlerAndroid';\nimport {handleNativeException, buildNfcExceptionAndroid} from './NfcError';\n\nconst NfcAdapter = {\n  FLAG_READER_NFC_A: 0x1,\n  FLAG_READER_NFC_B: 0x2,\n  FLAG_READER_NFC_F: 0x4,\n  FLAG_READER_NFC_V: 0x8,\n  FLAG_READER_NFC_BARCODE: 0x10,\n  FLAG_READER_SKIP_NDEF_CHECK: 0x80,\n  FLAG_READER_NO_PLATFORM_SOUNDS: 0x100,\n};\n\nconst delay = ms => new Promise(resolve => setTimeout(resolve, ms));\n\nclass NfcManagerAndroid extends NfcManagerBase {\n  constructor() {\n    super();\n    this.cleanUpTagRegistration = false;\n  }\n\n  requestTechnology = async (tech, options = {}) => {\n    try {\n      if (typeof tech === 'string') {\n        tech = [tech];\n      }\n\n      const sessionAvailable = await this._hasTagEventRegistrationAndroid();\n\n      // make sure we do register for tag event\n      if (!sessionAvailable) {\n        await this.registerTagEvent(options);\n        this.cleanUpTagRegistration = true;\n      }\n\n      return await callNative('requestTechnology', [tech]);\n    } catch (ex) {\n      throw buildNfcExceptionAndroid(ex);\n    }\n  };\n\n  cancelTechnologyRequest = async (options = {}) => {\n    const {throwOnError = false, delayMsAndroid = 1000} = options;\n\n    try {\n      await callNative('cancelTechnologyRequest');\n\n      if (this.cleanUpTagRegistration) {\n        await delay(delayMsAndroid);\n        await this.unregisterTagEvent();\n        this.cleanUpTagRegistration = false;\n      }\n    } catch (ex) {\n      if (throwOnError) {\n        throw buildNfcExceptionAndroid(ex);\n      }\n    }\n  };\n\n  getBackgroundTag = () =>\n    handleNativeException(callNative('getBackgroundTag'));\n\n  clearBackgroundTag = () =>\n    handleNativeException(callNative('clearBackgroundTag'));\n\n  // -------------------------------------\n  // public only for Android\n  // -------------------------------------\n  isEnabled = () => handleNativeException(callNative('isEnabled'));\n\n  goToNfcSetting = () => handleNativeException(callNative('goToNfcSetting'));\n\n  getLaunchTagEvent = () =>\n    handleNativeException(callNative('getLaunchTagEvent'));\n\n  setNdefPushMessage = (bytes) =>\n    handleNativeException(callNative('setNdefPushMessage', [bytes]));\n\n  setTimeout = (timeout) =>\n    handleNativeException(callNative('setTimeout', [timeout]));\n\n  connect = (techs) => handleNativeException(callNative('connect', [techs]));\n\n  close = () => handleNativeException(callNative('close'));\n\n  transceive = (bytes) =>\n    handleNativeException(callNative('transceive', [bytes]));\n\n  getMaxTransceiveLength = () =>\n    handleNativeException(callNative('getMaxTransceiveLength'));\n\n  // -------------------------------------\n  // (android) NfcTech.MifareClassic API\n  // -------------------------------------\n  get mifareClassicHandlerAndroid() {\n    if (!this._mifareClassicHandlerAndroid) {\n      this._mifareClassicHandlerAndroid = new MifareClassicHandlerAndroid(this);\n    }\n    return this._mifareClassicHandlerAndroid;\n  }\n\n  // -------------------------------------\n  // (android) NfcTech.MifareUltralight API\n  // -------------------------------------\n  get mifareUltralightHandlerAndroid() {\n    if (!this._mifareUltralightHandlerAndroid) {\n      this._mifareUltralightHandlerAndroid = new MifareUltralightHandlerAndroid(\n        this,\n      );\n    }\n    return this._mifareUltralightHandlerAndroid;\n  }\n\n  // -------------------------------------\n  // (android) NfcTech.NdefFormatable API\n  // -------------------------------------\n  get ndefFormatableHandlerAndroid() {\n    if (!this._ndefFormatableHandlerAndroid) {\n      this._ndefFormatableHandlerAndroid = new NdefFormatableHandlerAndroid(this);\n    }\n    return this._ndefFormatableHandlerAndroid;\n  }\n\n  // -------------------------------------\n  // Android private\n  // -------------------------------------\n  _hasTagEventRegistrationAndroid = () =>\n    handleNativeException(callNative('hasTagEventRegistration'));\n}\n\nexport {NfcAdapter, NfcManagerAndroid};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}