{"ast":null,"code":"'use strict';import _defineProperty from\"@babel/runtime/helpers/defineProperty\";import _asyncToGenerator from\"@babel/runtime/helpers/asyncToGenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;})),keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key]);}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}return target;}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true;}catch(e){return false;}}import Platform from\"react-native-web/dist/exports/Platform\";import{NativeNfcManager,callNative}from\"./NativeNfcManager\";import{NfcTech,NfcManagerBase,DEFAULT_REGISTER_TAG_EVENT_OPTIONS}from\"./NfcManager\";import{Nfc15693RequestFlagIOS,Nfc15693ResponseFlagIOS,Iso15693HandlerIOS}from\"./NfcTech/Iso15693HandlerIOS\";import{handleNativeException}from\"./NfcError\";var NfcManagerIOS=function(_NfcManagerBase){_inherits(NfcManagerIOS,_NfcManagerBase);var _super=_createSuper(NfcManagerIOS);function NfcManagerIOS(){var _this;_classCallCheck(this,NfcManagerIOS);_this=_super.call(this);_this.isEnabled=_asyncToGenerator(function*(){return true;});_this.requestTechnology=function(){var _ref2=_asyncToGenerator(function*(tech){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(typeof tech==='string'){tech=[tech];}var techList=[];for(var t of tech){if(t===NfcTech.NfcA){techList.push(NfcTech.MifareIOS);}else if(t===NfcTech.NfcV){techList.push(NfcTech.Iso15693IOS);}else{techList.push(t);}}return handleNativeException(callNative('requestTechnology',[techList,_objectSpread(_objectSpread({},DEFAULT_REGISTER_TAG_EVENT_OPTIONS),options)]));});return function(_x){return _ref2.apply(this,arguments);};}();_this.cancelTechnologyRequest=_asyncToGenerator(function*(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var _options$throwOnError=options.throwOnError,throwOnError=_options$throwOnError===void 0?false:_options$throwOnError;return handleNativeException(callNative('cancelTechnologyRequest'),!throwOnError);});_this.getBackgroundTag=_asyncToGenerator(function*(){var ndefMessage=yield handleNativeException(callNative('getBackgroundNdef'));return ndefMessage?{ndefMessage:ndefMessage}:null;});_this.clearBackgroundTag=_asyncToGenerator(function*(){return callNative('clearBackgroundNdef');});_this.getBackgroundNdef=function(){return handleNativeException(callNative('getBackgroundNdef'));};_this.setAlertMessage=function(alertMessage){return handleNativeException(callNative('setAlertMessage',[alertMessage]));};_this.setAlertMessageIOS=function(alertMessage){return handleNativeException(callNative('setAlertMessage',[alertMessage]));};_this.invalidateSessionIOS=function(){return handleNativeException(callNative('invalidateSession'));};_this.invalidateSessionWithErrorIOS=function(){var errorMessage=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'Error';return handleNativeException(callNative('invalidateSessionWithError',[errorMessage]));};_this.sendMifareCommandIOS=function(bytes){return handleNativeException(callNative('sendMifareCommand',[bytes]));};_this.sendFelicaCommandIOS=function(bytes){return handleNativeException(callNative('sendFelicaCommand',[bytes]));};_this.sendCommandAPDUIOS=function(bytesOrApdu){if(Platform.OS!=='ios'){return Promise.reject('not implemented');}if(Array.isArray(bytesOrApdu)){var bytes=bytesOrApdu;return handleNativeException(new Promise(function(resolve,reject){NativeNfcManager.sendCommandAPDUBytes(bytes,function(err,response,sw1,sw2){if(err){reject(err);}else{resolve({response:response,sw1:sw1,sw2:sw2});}});}));}else{var apdu=bytesOrApdu;return handleNativeException(new Promise(function(resolve,reject){NativeNfcManager.sendCommandAPDU(apdu,function(err,response,sw1,sw2){if(err){reject(err);}else{resolve({response:response,sw1:sw1,sw2:sw2});}});}));}};return _this;}_createClass(NfcManagerIOS,[{key:\"iso15693HandlerIOS\",get:function get(){if(!this._iso15693HandlerIOS){this._iso15693HandlerIOS=new Iso15693HandlerIOS();}return this._iso15693HandlerIOS;}}]);return NfcManagerIOS;}(NfcManagerBase);export{NfcManagerIOS,Nfc15693RequestFlagIOS,Nfc15693ResponseFlagIOS};","map":{"version":3,"names":["NativeNfcManager","callNative","NfcTech","NfcManagerBase","DEFAULT_REGISTER_TAG_EVENT_OPTIONS","Nfc15693RequestFlagIOS","Nfc15693ResponseFlagIOS","Iso15693HandlerIOS","handleNativeException","NfcManagerIOS","isEnabled","requestTechnology","tech","options","techList","t","NfcA","push","MifareIOS","NfcV","Iso15693IOS","cancelTechnologyRequest","throwOnError","getBackgroundTag","ndefMessage","clearBackgroundTag","getBackgroundNdef","setAlertMessage","alertMessage","setAlertMessageIOS","invalidateSessionIOS","invalidateSessionWithErrorIOS","errorMessage","sendMifareCommandIOS","bytes","sendFelicaCommandIOS","sendCommandAPDUIOS","bytesOrApdu","Platform","OS","Promise","reject","Array","isArray","resolve","sendCommandAPDUBytes","err","response","sw1","sw2","apdu","sendCommandAPDU","_iso15693HandlerIOS"],"sources":["/Users/dp-tonmai/Documents/GitHub/tomnjkun.github.io/node_modules/react-native-nfc-manager/src/NfcManagerIOS.js"],"sourcesContent":["'use strict';\nimport {Platform} from 'react-native';\nimport {NativeNfcManager, callNative} from './NativeNfcManager';\nimport {\n  NfcTech,\n  NfcManagerBase,\n  DEFAULT_REGISTER_TAG_EVENT_OPTIONS,\n} from './NfcManager';\nimport {\n  Nfc15693RequestFlagIOS,\n  Nfc15693ResponseFlagIOS,\n  Iso15693HandlerIOS,\n} from './NfcTech/Iso15693HandlerIOS';\nimport {handleNativeException} from './NfcError';\n\nclass NfcManagerIOS extends NfcManagerBase {\n  constructor() {\n    super();\n  }\n\n  isEnabled = async () => {\n    return true;\n  };\n\n  requestTechnology = async (tech, options = {}) => {\n    if (typeof tech === 'string') {\n      tech = [tech];\n    }\n\n    const techList = [];\n    for (const t of tech) {\n      if (t === NfcTech.NfcA) {\n        techList.push(NfcTech.MifareIOS);\n      } else if (t === NfcTech.NfcV) {\n        techList.push(NfcTech.Iso15693IOS);\n      } else {\n        techList.push(t);\n      }\n    }\n\n    return handleNativeException(\n      callNative('requestTechnology', [\n        techList,\n        {\n          ...DEFAULT_REGISTER_TAG_EVENT_OPTIONS,\n          ...options,\n        },\n      ]),\n    );\n  };\n\n  cancelTechnologyRequest = async (options = {}) => {\n    const {throwOnError = false} = options;\n    return handleNativeException(\n      callNative('cancelTechnologyRequest'),\n      !throwOnError,\n    );\n  };\n\n  getBackgroundTag = async () => {\n    // iOS doesn't report the full tag, only the ndefMessage part\n    const ndefMessage = await handleNativeException(callNative('getBackgroundNdef'));\n    return ndefMessage ? { ndefMessage } : null;\n  };\n\n  clearBackgroundTag = async () => callNative('clearBackgroundNdef');\n\n  // -------------------------------------\n  // public only for iOS\n  // -------------------------------------\n  getBackgroundNdef = () =>\n    handleNativeException(callNative('getBackgroundNdef'));\n\n  setAlertMessage = (alertMessage) =>\n    handleNativeException(callNative('setAlertMessage', [alertMessage]));\n\n  setAlertMessageIOS = (alertMessage) =>\n    handleNativeException(callNative('setAlertMessage', [alertMessage]));\n\n  invalidateSessionIOS = () =>\n    handleNativeException(callNative('invalidateSession'));\n\n  invalidateSessionWithErrorIOS = (errorMessage = 'Error') =>\n    handleNativeException(\n      callNative('invalidateSessionWithError', [errorMessage]),\n    );\n\n  // -------------------------------------\n  // (iOS) NfcTech.MifareIOS API\n  // -------------------------------------\n  sendMifareCommandIOS = (bytes) =>\n    handleNativeException(callNative('sendMifareCommand', [bytes]));\n\n  // -------------------------------------\n  // (iOS) NfcTech.FelicaIOS API\n  // -------------------------------------\n  sendFelicaCommandIOS = (bytes) =>\n    handleNativeException(callNative('sendFelicaCommand', [bytes]));\n\n  // -------------------------------------\n  // (iOS) NfcTech.IsoDep API\n  // -------------------------------------\n  sendCommandAPDUIOS = (bytesOrApdu) => {\n    if (Platform.OS !== 'ios') {\n      return Promise.reject('not implemented');\n    }\n\n    if (Array.isArray(bytesOrApdu)) {\n      const bytes = bytesOrApdu;\n      return handleNativeException(\n        new Promise((resolve, reject) => {\n          NativeNfcManager.sendCommandAPDUBytes(\n            bytes,\n            (err, response, sw1, sw2) => {\n              if (err) {\n                reject(err);\n              } else {\n                resolve({response, sw1, sw2});\n              }\n            },\n          );\n        }),\n      );\n    } else {\n      const apdu = bytesOrApdu;\n      return handleNativeException(\n        new Promise((resolve, reject) => {\n          NativeNfcManager.sendCommandAPDU(apdu, (err, response, sw1, sw2) => {\n            if (err) {\n              reject(err);\n            } else {\n              resolve({response, sw1, sw2});\n            }\n          });\n        }),\n      );\n    }\n  };\n\n  // -------------------------------------\n  // (iOS) NfcTech.Iso15693IOS API\n  // -------------------------------------\n  get iso15693HandlerIOS() {\n    if (!this._iso15693HandlerIOS) {\n      this._iso15693HandlerIOS = new Iso15693HandlerIOS();\n    }\n    return this._iso15693HandlerIOS;\n  }\n}\n\nexport {NfcManagerIOS, Nfc15693RequestFlagIOS, Nfc15693ResponseFlagIOS};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}